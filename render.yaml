services:
  - type: web
    name: multichat-app
    runtime: docker
    plan: starter
    dockerfilePath: ./Dockerfile
    dockerContext: .
    dockerBuildCommand: docker build --build-arg VITE_GOOGLE_CLIENT_ID="" --build-arg VITE_DEV_MODE="1" -t multichat-app .
    envVars:
      - key: OPENAI_API_KEY
        sync: false
      - key: ANTHROPIC_API_KEY  
        sync: false
      - key: DEEPSEEK_API_KEY
        sync: false
      - key: CHATGPT_PRO_API_KEY
        sync: false
      - key: GOOGLE_CLIENT_ID
        sync: false
      - key: VITE_GOOGLE_CLIENT_ID
        sync: false
      - key: JWT_SECRET
        sync: false
      - key: JWT_EXPIRES
        value: "1440"
      - key: PORT
        value: 10000
      - key: PYTHONUNBUFFERED
        value: "1"
      - key: DEBUG
        value: "False"
      - key: HOST
        value: "0.0.0.0"
      # Dev mode settings for production (bypass Google Auth)
      - key: DEV_MODE
        value: "1"
      - key: FORCE_DEV_AUTH
        value: "1"
      - key: BYPASS_GOOGLE_AUTH
        value: "1"
      - key: VITE_DEV_MODE
        value: "1"
    buildCommand: ""
    startCommand: ""
    healthCheckPath: "/health"
    autoDeploy: true
    branch: main
