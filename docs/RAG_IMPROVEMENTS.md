# RAG Improvements - January 2026

## –ü—Ä–æ–±–ª–µ–º—ã —Å —Ç–µ–∫—É—â–∏–º RAG (–∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏)

1. **–ü—Ä–æ—Å—Ç–æ–π –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫** - –æ–¥–∏–Ω –≤–æ–ø—Ä–æ—Å = –æ–¥–∏–Ω –≤–µ–∫—Ç–æ—Ä. –í–æ–ø—Ä–æ—Å "–ü—Ä–æ—Ü–∏—Ç–∏—Ä—É–π –ø–µ—Ä–≤—ã–π –∞–±–∑–∞—Ü 14 –≥–ª–∞–≤—ã" –Ω–µ –∏–º–µ–µ—Ç –±–ª–∏–∑–∫–æ–≥–æ –≤–µ–∫—Ç–æ—Ä–∞ –≤ —Ç–µ–∫—Å—Ç–µ.
2. **–ù–µ—Ç multi-query retrieval** - –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –º–Ω–æ–≥–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.
3. **–ù–µ—Ç –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤–∏–¥–µ–ª —á—Ç–æ –∏—â–µ—Ç—Å—è –∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è.

## –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. Multi-Query RAG

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–±–∏–≤–∞–µ—Ç –≤–æ–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–¥–∑–∞–ø—Ä–æ—Å–æ–≤:

```
Original: "–û —á–µ–º —ç—Ç–∞ –∫–Ω–∏–≥–∞?"
Generated:
  - "–û —á–µ–º —ç—Ç–∞ –∫–Ω–∏–≥–∞?"
  - "–∫—Ä–∞—Ç–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –∫–Ω–∏–≥–∏"
  - "–æ—Å–Ω–æ–≤–Ω–∞—è —Ç–µ–º–∞ –∏ —Å—é–∂–µ—Ç"
  - "–≥–ª–∞–≤–Ω—ã–µ –∏–¥–µ–∏ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è"
```

–ö–∞–∂–¥—ã–π –ø–æ–¥–∑–∞–ø—Ä–æ—Å –∏—â–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è –∏ –¥–µ–¥—É–ø–ª–∏—Ü–∏—Ä—É—é—Ç—Å—è.

### 2. LLM Reranking

–ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤, LLM –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å –∫–∞–∂–¥–æ–≥–æ —á–∞–Ω–∫–∞ –∫ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º—É –≤–æ–ø—Ä–æ—Å—É –Ω–∞ —à–∫–∞–ª–µ 0-10.

### 3. –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –≤ UI

–¢–µ–ø–µ—Ä—å –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –≤–∏–¥–Ω–æ:

* –ö–∞–∫–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã/—á–∞–Ω–∫–∏ –±—ã–ª–∏ –Ω–∞–π–¥–µ–Ω—ã
* –ö–∞–∫–∏–µ –ø–æ–¥–∑–∞–ø—Ä–æ—Å—ã –±—ã–ª–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã
* –ö–∞–∫–æ–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –±—ã–ª –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ –º–æ–¥–µ–ª—å
* –ü–æ–ª–Ω—ã–π —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç (–ø–æ –∑–∞–ø—Ä–æ—Å—É)

### 4. –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫

–ö–æ–º–±–∏–Ω–∞—Ü–∏—è –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ + keyword –ø–æ–∏—Å–∫–∞ –¥–ª—è –ª—É—á—à–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### Environment Variables

```bash
# –†–∞–∑–º–µ—Ä —á–∞–Ω–∫–∞ (—Å–∏–º–≤–æ–ª–æ–≤)
RAG_CHUNK_SIZE=1000

# –ü–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ —á–∞–Ω–∫–æ–≤ (—Å–∏–º–≤–æ–ª–æ–≤)  
RAG_CHUNK_OVERLAP=200

# –ú–æ–¥–µ–ª—å –¥–ª—è embeddings
EMBEDDING_MODEL=text-embedding-3-small
```

### API Configuration (in chat request)

```json
{
  "rag": {
    "enabled": true,
    "mode": "advanced",  // "auto", "manual", "advanced", "off"
    "use_rerank": true,
    "min_similarity": 0.5,
    "max_chunks": 5
  }
}
```

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ä–µ–∂–∏–º (mode: "auto")

1. Hybrid search (vector + keyword)
2. Return top N results

### –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —Ä–µ–∂–∏–º (mode: "advanced" –∏–ª–∏ use\_rerank: true)

1. **Multi-Query Generation** - LLM –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç 3 –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–∞
2. **Multi-Query Search** - –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –∏—â–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ
3. **Deduplication** - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è, –ø–æ–≤—Ç–æ—Ä—ã —É–¥–∞–ª—è—é—Ç—Å—è
4. **Boost** - —á–∞–Ω–∫–∏ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏ –ø–æ–ª—É—á–∞—é—Ç boost
5. **Rerank** - LLM –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å —Ç–æ–ø-20 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
6. **Return** - –ª—É—á—à–∏–µ 5-8 —á–∞–Ω–∫–æ–≤ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç

## UI Components

### RAGContextSection

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–¥ –æ—Ç–≤–µ—Ç–æ–º –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞:

* üìö –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —á–∞–Ω–∫–æ–≤
* –°–ø–∏—Å–æ–∫ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Å:
  * –ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
  * –ü—Ä–æ—Ü–µ–Ω—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
  * Rerank score (–µ—Å–ª–∏ –±—ã–ª reranking)
  * –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ query matches (–µ—Å–ª–∏ multi-query)
  * Preview —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
* Debug info:
  * –ö–∞–∫–∏–µ –ø–æ–¥–∑–∞–ø—Ä–æ—Å—ã –±—ã–ª–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã
  * –ö–∞–∫–æ–π –º–µ—Ç–æ–¥ –ø–æ–∏—Å–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è
  * –°–∫–æ–ª—å–∫–æ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ –Ω–∞–π–¥–µ–Ω–æ –¥–æ/–ø–æ—Å–ª–µ rerank
* Show context sent to model - –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç
* Show full system prompt - –ø–æ–ª–Ω—ã–π —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É** - –≤–æ–ø—Ä–æ—Å—ã —Ç–∏–ø–∞ "–ß—Ç–æ –≤ 14 –≥–ª–∞–≤–µ?" –ø–ª–æ—Ö–æ —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–æ–º–µ—Ä–∞ –≥–ª–∞–≤ –Ω–µ —Å–æ–∑–¥–∞—é—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –≤–µ–∫—Ç–æ—Ä—ã.

2. **–¢—Ä–µ–±—É–µ—Ç —Ö–æ—Ä–æ—à–µ–≥–æ —á–∞–Ω–∫–∏–Ω–≥–∞** - –µ—Å–ª–∏ —á–∞–Ω–∫–∏ —Å–ª–∏—à–∫–æ–º –º–∞–ª–µ–Ω—å–∫–∏–µ, —Ç–µ—Ä—è–µ—Ç—Å—è –∫–æ–Ω—Ç–µ–∫—Å—Ç. –ï—Å–ª–∏ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–µ - –º–Ω–æ–≥–æ –ª–∏—à–Ω–µ–≥–æ —Ç–µ–∫—Å—Ç–∞.

3. **Multi-query –¥–æ–±–∞–≤–ª—è–µ—Ç –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** - ~500ms –Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –ø–æ–¥–∑–∞–ø—Ä–æ—Å–æ–≤ + ~500ms –Ω–∞ reranking.

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–æ–ª—å—à–∏–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã** - —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏, –≥–ª–∞–≤–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ø–∞–¥—É—Ç –≤ metadata —á–∞–Ω–∫–æ–≤.

2. **–î–ª—è –∫–Ω–∏–≥**: –ú–æ–∂–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π "–∏–Ω–¥–µ–∫—Å" –¥–æ–∫—É–º–µ–Ω—Ç–∞ - –∫—Ä–∞—Ç–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –ø–æ –≥–ª–∞–≤–∞–º, –∫–æ—Ç–æ—Ä–æ–µ —Ö–æ—Ä–æ—à–æ –∏—â–µ—Ç—Å—è.

3. **–î–ª—è —Ç–æ—á–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ keyword search –∏–ª–∏ –∫–æ–º–±–∏–Ω–∏—Ä—É–π—Ç–µ —Å –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–º –ø–æ–∏—Å–∫–æ–º.

## –ß—Ç–æ –µ—â—ë –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å (–±—É–¥—É—â–µ–µ)

1. **Agentic RAG** - –∞–≥–µ–Ω—Ç —Å–∞–º —Ä–µ—à–∞–µ—Ç –∫–æ–≥–¥–∞ –∏ –∫–∞–∫ –∏—Å–∫–∞—Ç—å, –º–æ–∂–µ—Ç –¥–µ–ª–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏—Ç–µ—Ä–∞—Ü–∏–π –ø–æ–∏—Å–∫–∞.

2. **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–≥–ª–∞–≤—ã, —Ä–∞–∑–¥–µ–ª—ã, —Å—Ç—Ä–∞–Ω–∏—Ü—ã).

3. **Contextual Retrieval** - –¥–æ–±–∞–≤–ª—è—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –∫ –∫–∞–∂–¥–æ–º—É —á–∞–Ω–∫—É –ø—Ä–∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ (—á—Ç–æ —ç—Ç–æ –∑–∞ —á–∞—Å—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞).

4. **GraphRAG** - —Å—Ç—Ä–æ–∏—Ç—å –≥—Ä–∞—Ñ —Å–≤—è–∑–µ–π –º–µ–∂–¥—É —Å—É—â–Ω–æ—Å—Ç—è–º–∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ.
